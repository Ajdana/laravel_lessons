Иногда нужно получить запись из базы. Если запись **существует** - мы ее возвращаем . Если **нет** - создаем новую .
У нас есть два основных комбинированных запроса :

1. firstOrCreate 

- Проверяет по заданным критериям, существует ли запись в базе.
    
- Если **нашёл** — вернёт её.
    
- Если **не нашёл** — создаст новую.

```php
public function firstOrCreate() {  
    $anotherPost = [  
        'title' => 'some post',  
        'content' => 'some content',  
        'image' => 'some imageblabla.jpg',  
        'likes' => 50000,  
        'is_published' => 1,  
    ];  
    $post = Post::firstOrCreate([  
        'title' => 'some title phpstorm',  
    ],[  
        'title' => 'some title phpstorm',  
        'content' => 'some content',  
        'image' => 'some imageblabla.jpg',  
        'likes' => 50000,  
        'is_published' => 1,  
    ]);  
    dump($post->content);  
    dd('finished');  
}
```

✅ Используется, чтобы избежать **дубликатов** по определённым полям (например, `title`).

2. updateOrCreate 

- Проверяет, существует ли запись по определённым критериям.
    
- Если **нашёл** — обновляет её.
    
- Если **не нашёл** — создаёт новую.

```php
public function updateOrCreate() {  
    $anotherPost = [  
        'title' => 'updateorcreate some post',  
        'content' => 'updateorcreate some content',  
        'image' => 'updateorcreate some imageblabla.jpg',  
        'likes' => 500,  
        'is_published' => 0,  
    ];  
  
    $post = Post::updateOrCreate([  
        'title' => 'some title not phpstorm'  
    ],[  
        'title' => 'some title phpstorm',  
        'content' => 'its not update some content',  
        'image' => 'its not update some imageblabla.jpg',  
        'likes' => 500,  
        'is_published' => 0,  
    ]);  
    dump($post->content);  
    dd('222222');  
}
```