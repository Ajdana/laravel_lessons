## 1. Обычное удаление

- В контроллере получаем модель:
    ```php
    $post = Post::find($id); $post->delete();
    ```
    
    
- После вызова `delete()` запись **полностью удаляется** из базы.
    
- Проблема: если записи удалены по ошибке, восстановить их уже нельзя.
    

---

## 2. Зачем нужен Soft Delete (мягкое удаление)

- В реальных проектах **данные нельзя безвозвратно удалять**.
    
- Бизнес-логика требует возможности восстановить запись.
    
- Soft Delete позволяет "пометить" запись удалённой, но не стирать её физически.
    

---

## 3. Реализация Soft Delete

1. В миграции таблицы добавить колонку:
    ```php
    $table->softDeletes();
    ```
    
    
    Это создаст поле `deleted_at`.
    
2. В модели (`Post.php`) подключить трейт:
    ```php
    use Illuminate\Database\Eloquent\SoftDeletes;  class Post extends Model {     use SoftDeletes; }
    ```
    
    

---

## 4. Как работает Soft Delete

- При вызове:
    
    `$post->delete();`
    
    в колонку `deleted_at` записывается дата.  
    Физически запись остаётся в таблице, но в выборках Laravel её не учитывает.
    
- Чтобы **получить удалённые записи**:
    
    `Post::withTrashed()->get();`
    
- Чтобы **восстановить запись**:
    
    `$post = Post::withTrashed()->find($id); $post->restore();`
    
- Чтобы **удалить запись навсегда** (игнорируя soft delete):
    
    `$post->forceDelete();`
    

---

## 5. Важные моменты

- После изменения миграции нужно обновить БД:
    
    `php artisan migrate:fresh`
    
    (⚠️ стирает все таблицы и пересоздаёт заново).
    
- В реальной работе почти всегда используют **Soft Delete**, а не обычное `delete()`.
    

---

### ✅ Итог

- `delete()` — удаляет (или помечает удалённой при Soft Delete).
    
- `withTrashed()` — позволяет искать и среди удалённых.
    
- `restore()` — восстанавливает запись.
    
- `forceDelete()` — безвозвратно удаляет из базы.