## Конспект: Composer автозагрузка своих классов

### 1. Подготовка

- Нужен установленный **PHP** и **Composer**.
    
- Проверить версию: `composer -V`.
    
- При необходимости обновить: `composer self-update`.
    

### 2. Инициализация проекта

- В корне сайта создаём `composer.json`:
    
    `{   "autoload": {     "psr-4": {       "App\\": "src/App/"     }   } }`
    
- После изменений запускать `composer dump-autoload`.
    
- В `vendor` появится файл `autoload.php`, который подключаем в `index.php`:
    
    `require __DIR__ . '/vendor/autoload.php';`
    

### 3. Пространства имён и структура

- Пространство имён (`namespace`) связывается с папкой.
    
- В `composer.json` указали: `"App\\": "src/App/"`.
    
- Структура:
    
    `src/   App/     Book/       Book.php     Journal/       Journal.php`
    

### 4. Пример класса

`<?php namespace App\Book;  class Book {     public function path() {         return __CLASS__ . "::" . __FILE__;     } }`

### 5. Использование в коде

`use App\Book\Book;  $book = new Book(); echo $book->path();`

### 6. Автозагрузка в действии

- При вызове нового класса Composer автоматически находит и подключает нужный файл.
    
- Работает за счёт PSR-4 и `autoload.php`.
    
- Каждый новый класс создаётся в своей папке и с тем же именем, что и сам класс.
    

### 7. Итог

- Автозагрузка упрощает работу: не нужно вручную подключать `require` для каждого файла.
    
- Можно создавать сколько угодно классов, и Composer сам их подключит.
    
- Основные библиотеки — из `vendor`, свои классы — из `src`.

### Без автозагрузки

- Каждый раз, когда тебе нужен класс, ты пишешь `require` или `include`.
    
- Например:
    
    `require 'src/App/Book/Book.php'; require 'src/App/Journal/Journal.php';  $book = new Book(); $journal = new Journal();`
    
- В большом проекте таких подключений могут быть сотни → код становится запутанным.
    

---

### С автозагрузкой (Composer)

- Достаточно **один раз** подключить `vendor/autoload.php`.
    
- Дальше Composer сам найдёт и загрузит нужный класс при первом обращении к нему.
    
- Например:
    
    `require __DIR__ . '/vendor/autoload.php';  use App\Book\Book; use App\Journal\Journal;  $book = new Book(); $journal = new Journal();`
    
- Тебе не нужно думать, где лежит файл. Composer по правилам (PSR-4) сам определяет путь.
    

---

### Зачем это нужно

1. **Экономит время** — не нужно вручную прописывать десятки `require`.
    
2. **Меньше ошибок** — нет риска забыть подключить файл.
    
3. **Стандартизация (PSR-4)** — структура проекта становится логичной и предсказуемой.
    
4. **Совместимость** — можно легко подключать сторонние библиотеки (через Composer).
    
5. **Удобство поддержки** — проект легче расширять и сопровождать.