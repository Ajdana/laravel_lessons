## 1. –ß—Ç–æ —ç—Ç–æ?

- –£ **–æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞** –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ —Ç–µ–≥–æ–≤.
    
- –£ **–æ–¥–Ω–æ–≥–æ —Ç–µ–≥–∞** –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ –ø–æ—Å—Ç–æ–≤.
    
- –ü—Ä–æ—Å—Ç—ã–º foreign key —Ç—É—Ç –Ω–µ –æ–±–æ–π—Ç–∏—Å—å ‚Üí –Ω—É–∂–Ω–∞ **—Å–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞**.
    

---

## 2. –¢–∞–±–ª–∏—Ü—ã

### –ü—Ä–∏–º–µ—Ä: —É –Ω–∞—Å –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü—ã

- `posts`
    
- `tags`
    
- –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è: `post_tag`
    

---

## 3. –ú–∏–≥—Ä–∞—Ü–∏–∏

### –¢–∞–±–ª–∏—Ü–∞ `tags`

`php artisan make:migration create_tags_table --create=tags`

–í –º–∏–≥—Ä–∞—Ü–∏–∏:

`Schema::create('tags', function (Blueprint $table) {     $table->id();     $table->string('title');     $table->timestamps(); });`

### –°–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ `post_tag`

> –ö–æ–Ω–≤–µ–Ω—Ü–∏—è: –Ω–∞–∑–≤–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É ‚Üí `post_tag`.

`php artisan make:migration create_post_tag_table --create=post_tag`

–í –º–∏–≥—Ä–∞—Ü–∏–∏:

`Schema::create('post_tag', function (Blueprint $table) {     $table->id();      $table->unsignedBigInteger('post_id');     $table->unsignedBigInteger('tag_id');      $table->foreign('post_id')           ->references('id')->on('posts')           ->onDelete('cascade');      $table->foreign('tag_id')           ->references('id')->on('tags')           ->onDelete('cascade'); });`

---

## 4. –ú–æ–¥–µ–ª–∏

### `Post.php`

`public function tags() {     return $this->belongsToMany(Tag::class, 'post_tag', 'post_id', 'tag_id'); }`

### `Tag.php`

`public function posts() {     return $this->belongsToMany(Post::class, 'post_tag', 'tag_id', 'post_id'); }`

---

## 5. –†–∞–±–æ—Ç–∞ —Å –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π

`$post = Post::find(1);  // –ø—Ä–∏–≤—è–∑–∞—Ç—å —Ç–µ–≥–∏ –ø–æ ID $post->tags()->attach([1, 2]);  // –æ—Ç–≤—è–∑–∞—Ç—å $post->tags()->detach([2]);  // —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (—Å—Ç–∞—Ä—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è, –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ) $post->tags()->sync([1, 3]);`

---

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

`$post = Post::with('tags')->find(1);  foreach ($post->tags as $tag) {     echo $tag->title; }`

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è —Ç–µ–≥–æ–≤:

`$tag = Tag::with('posts')->find(1);  foreach ($tag->posts as $post) {     echo $post->title; }`

---

## 6. –ò—Ç–æ–≥

- –û—Ç–Ω–æ—à–µ–Ω–∏–µ –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º –≤ Laravel —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ **belongsToMany**.
    
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `post_tag`.
    
- –ú–µ—Ç–æ–¥—ã:
    
    - `attach()` ‚Üí –¥–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å
        
    - `detach()` ‚Üí —É–±—Ä–∞—Ç—å —Å–≤—è–∑—å
        
    - `sync()` ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
        

---

üîë **–§–æ—Ä–º—É–ª–∞ –¥–ª—è —à–ø–∞—Ä–≥–∞–ª–∫–∏**:

`return $this->belongsToMany(     TargetModel::class, // —Å –∫–∞–∫–æ–π –º–æ–¥–µ–ª—å—é —Å–≤—è–∑—å     'pivot_table_name', // –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã     'this_model_id',    // –∫–æ–ª–æ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏     'target_model_id'   // –∫–æ–ª–æ–Ω–∫–∞ —Å–≤—è–∑–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ );`