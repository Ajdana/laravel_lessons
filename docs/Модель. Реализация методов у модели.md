Конспект: Как устроена модель в Laravel

## 1. Где искать методы моделей

- Мы пишем:
    
    ```php
    $post = Post::find(1);
    ```
    
    Но в самой модели `Post` метода `find()` нет.
    
- Дело в том, что `Post` **наследует** (`extends`) класс `Model`, а тот подключает множество других классов и трейтов.
    
- Весь этот функционал подтягивается из пакета `laravel/framework`, который ставится через `composer` и хранится в папке **`vendor`**.
    

---

## 2. Где реально хранится метод `find()`

- Если открыть `vendor/laravel/framework/src/Illuminate/Database/...`, можно найти классы `Builder`, `Query\Builder`, и именно там реализованы такие методы, как:
    
    - `find()`
        
    - `first()`
        
    - `where()`
        
    - и т.д.
        
- Внутри них скрыты SQL-запросы, только в «обёрнутом» виде для удобства.
    

---

## 3. Eloquent ORM и Query Builder

- В Laravel есть два основных способа работать с базой:
    
    1. **Query Builder (DB facade)**  
        Прямой доступ к таблицам, например:
        
        ```php
        DB::table('posts')->find(1);
        ```
        
        Здесь мы явно указываем таблицу.
        
    2. **Eloquent (ORM)**  
        Работа через **модели**, которые уже связаны с таблицей:
        
        ```php
        Post::find(1);
        ```
        
        Таблица определяется автоматически (по имени модели) или указывается вручную в `$table`.
        

---

## 4. В чём разница

- **Query Builder (DB)** — низкоуровневый, работает напрямую с таблицами.
    
- **Eloquent (модели)** — высокоуровневый, работает через классы, которые уже связаны с таблицами.
    
- Внутри Eloquent всё равно используются SQL-запросы, но обёрнутые в методы (`find`, `where`, `create`, `update` и т.д.).
    

---

✅ Итог:  
Laravel устроен так, что методы моделей (Eloquent ORM) — это «сладкая обёртка» над SQL, которая делает код более читаемым и удобным. На низком уровне всё это всё равно превращается в SQL-запросы через `Query Builder`.
